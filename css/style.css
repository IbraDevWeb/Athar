/* --- CORE & UTILITIES --- */
[v-cloak] { display: none !important; }
body { -webkit-tap-highlight-color: transparent; overscroll-behavior-y: none; }

/* Custom Scrollbar */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #dcd6c5; border-radius: 10px; border: 1px solid transparent; background-clip: content-box; }
.dark ::-webkit-scrollbar-thumb { background: #4b5563; }
::-webkit-scrollbar-thumb:hover { background: #c5a059; }

/* Loader */
#app-loader {
    position: fixed; inset: 0; z-index: 9999;
    background-color: #f9f7f2;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    transition: opacity 0.5s ease, visibility 0.5s;
}
.dark #app-loader { background-color: #1a1c23; }
.spinner {
    width: 60px; height: 60px;
    border: 3px solid rgba(197, 160, 89, 0.1);
    border-radius: 50%;
    border-top-color: #c5a059;
    animation: spin 1s cubic-bezier(0.55, 0.055, 0.675, 0.19) infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Text Highlights & Interaction */
.term-highlight { 
    border-bottom: 2px dotted #c5a059; 
    color: #9a7b3b; 
    cursor: help; 
    font-weight: 600; 
    transition: all 0.2s ease;
    position: relative;
}
.term-highlight:hover { 
    color: #c5a059; 
    border-bottom-style: solid; 
    background-color: rgba(197, 160, 89, 0.1);
    border-radius: 2px;
}

.link-highlight { 
    color: #c5a059; 
    text-decoration: underline; 
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
    cursor: pointer; 
    font-weight: 700; 
    transition: all 0.2s ease; 
}
.link-highlight:hover { 
    opacity: 0.8; 
    text-decoration-thickness: 2px;
}

/* Vue Transitions */
.page-enter-active, .page-leave-active { transition: opacity 0.4s ease, transform 0.4s ease; }
.page-enter-from { opacity: 0; transform: translateY(10px); }
.page-leave-to { opacity: 0; transform: translateY(-10px); }

.toast-enter-active, .toast-leave-active { transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); }
.toast-enter-from, .toast-leave-to { opacity: 0; transform: translateY(20px) scale(0.9); }

.fade-enter-active, .fade-leave-active { transition: opacity 0.3s ease; }
.fade-enter-from, .fade-leave-to { opacity: 0; }

.slide-right-enter-active, .slide-right-leave-active { transition: transform 0.3s ease; }
.slide-right-enter-from, .slide-right-leave-to { transform: translateX(100%); }

/* Print styles */
@media print { 
    header, aside, .no-print, .fixed-ui { display: none !important; } 
    body { background: white !important; color: black !important; height: auto !important; overflow: visible !important; }
    .print-break { page-break-inside: avoid; }
}

/* --- MAP & ATLAS STYLES --- */
#map { z-index: 0; background: #eaddcf; transition: filter 0.5s ease; height: 100%; width: 100%; }

/* Mode Vintage (Light) */
.map-tiles { filter: sepia(0.2) contrast(1.05) brightness(0.95) saturate(0.6); }

/* Mode Sombre (Dark Map) */
.dark #map { background: #1a1c23; }
.dark .map-tiles { filter: invert(100%) hue-rotate(180deg) brightness(0.95) contrast(0.9) grayscale(0.2); }

/* Custom Markers */
.custom-icon { transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
.custom-icon:hover { transform: scale(1.2) translateY(-5px); z-index: 1000 !important; }

/* Clusters */
.marker-cluster-small, .marker-cluster-medium, .marker-cluster-large { background-color: rgba(197, 160, 89, 0.2); }
.marker-cluster div { background-color: #1a1c23; color: #c5a059; font-family: serif; font-weight: bold; border: 1px solid #c5a059; }
.dark .marker-cluster div { background-color: #c5a059; color: #1a1c23; }

/* Slider */
input[type=range] { -webkit-appearance: none; background: transparent; }
input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%; background: #c5a059; cursor: pointer; margin-top: -6px; box-shadow: 0 0 0 4px rgba(197, 160, 89, 0.2); transition: transform 0.1s;
}
input[type=range]::-webkit-slider-thumb:hover { transform: scale(1.2); }
input[type=range]::-webkit-slider-runnable-track { width: 100%; height: 4px; cursor: pointer; background: #e5e7eb; border-radius: 2px; }
.dark input[type=range]::-webkit-slider-runnable-track { background: #374151; }